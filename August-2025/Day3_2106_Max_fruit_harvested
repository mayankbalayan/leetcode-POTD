2106. Maximum Fruits Harvested After at Most K Steps

Leetcode Link:- https://leetcode.com/problems/maximum-fruits-harvested-after-at-most-k-steps/description/?envType=daily-question&envId=2025-08-03

class Solution {
public:
    int maxTotalFruits(vector<vector<int>>& fruits, int startPos, int k) {
        int n = fruits.size();

        vector<int>prefixsum(n);
        vector<int>positions(n);

        for(int i =0; i<n; i++){
            positions[i]=fruits[i][0];

            prefixsum[i]= fruits[i][1] + (i>0 ? prefixsum[i-1] : 0);

        }
        int maxfruits = 0;
        for(int d=0; d<=k/2;d++){
            // case moved k steps to left
            int remain = k-2*d;
            int i = startPos-d;
            int j = startPos + remain;

            int left = lower_bound(begin(positions),end(positions),i)-begin(positions);
            int right = upper_bound(begin(positions),end(positions),j) - begin(positions)-1;
            if(left <= right){
            int total = prefixsum[right] - (left>0 ? prefixsum[left-1] : 0);
            maxfruits = max(maxfruits,total);
            }
            // case 2 move d to right 
             j = startPos+d;
             i = startPos - remain;
            left = lower_bound(begin(positions),end(positions),i)-begin(positions);
            right = upper_bound(begin(positions),end(positions),j) - begin(positions)-1;
             if(left <= right){
            int total = prefixsum[right] - (left>0 ? prefixsum[left-1] : 0);
            maxfruits = max(maxfruits,total);
            }
        }
        return maxfruits;
    }
};
